@model WebApplication1.ViewModels.ProductVM
@{
    ViewBag.Title = "Index";
    var type1 = "Raw Product";
    var type2 = "Finisihed Product";
    var type3 = "SemiFinished Product";
    var bal = 0;
    decimal o = 1;
    decimal b_unit = Convert.ToDecimal(Session["BusinessUnit"]);
}
<script>
    //$(document).ready(function () {
    //    $('#searchable').DataTable({
    //        "paging": false
    //    });
    //});
    function check() {
        //  alert("dsasd");
        var len = document.querySelectorAll('.abc input[type="checkbox"]:checked').length;
        // alert(len);
        if (len <= 0) {
            alert("Please select atleast one Product");
            return false;
        } else {

        }
    }
</script>
<div class="content">
    <div class="content-header">
        <div class="leftside-content-header">
            <ul class="breadcrumbs">
                <li><a><i class="fa fa-cubes" aria-hidden="true"></i> Registrations</a></li>
            </ul>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h4 class="section-subtitle"><b>Products List</b></h4>
            <a href="@Url.Action("Create", "Product")" class="btn btn-wide btn-success pull-right" style="margin-top:-40px"><i class="fa fa-plus"></i>  Creat New</a>
            <div class="panel">
                <div class="panel-content">
                    <div class="table-responsive">
                        <table class="table table-bordered table-hover table-striped table-success" id="searchable">
                            <thead class="bordered-darkorange">
                                <tr>
                                    <th>Name</th>
                                    <th>Munit</th>
                                    <th>Length</th>
                                    <th>Description</th>
                                    <th>Sale Price </th>
                                    <th>Cost Price </th>
                                    <th style="width:60px">Opening Stock</th>
                                    <th style="width:60px"> Closing Balance</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody class="abc">
                                @foreach (var item in Model.lp_lisr.Where(z=>z.BusinessUnit == b_unit))
                                {
                                    <tr>
                                        <td><a data-toggle="modal" href="#" data-target="#@item.ID" style="text-decoration:underline">@item.Name</a></td>
                                        <td>@item.MUnit</td>
                                        <td>@item.PiecesBox</td>
                                        <td>@item.CatID</td>
                                        <td>@item.CostPrice</td>
                                        <td>@item.SalePrice</td>
                                        <td>@item.OpeningStock</td>
                                        <td style="text-align-last:right">@String.Format("{0:N}", bal)</td>
                                        <td>
                                           <a href="@Url.Action("Delete", new { ID = item.ID })" new { onclick="return confirm('Are you sure you want to delete this record?');" class="btn btn-danger shiny input-xs"><i class="fa fa-trash-o"></i></a>
                                        </td>
                                        <div class="modal fade" id="@item.ID" aria-labelledby="modal-large-label" style="margin-top:-100px">
                                            <div class="modal-dialog modal-lg" role="document">
                                                @using (Html.BeginForm("Update", "Product", FormMethod.Post, new { enctype = "multipart/form-data" }))
                                                {
                                                    <div class="modal-content">
                                                        <div class="modal-header state modal-primary">
                                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                                            <h4 class="modal-title" id="modal-large-label">Product Details</h4>
                                                        </div>
                                                        <div class="modal-body">
                                                            <div class="col-sm-12">
                                                                <br />

                                                                <div class="form-group col-sm-3">
                                                                    <label>Product ID</label>
                                                                    <input type="hidden" name="p_id" value="@item.ID" class="form-control">
                                                                    <input type="text" readonly value="@item.ID" class="form-control">
                                                                </div>
                                                                <div class="form-group col-sm-3">
                                                                    <label>Select Category </label>
                                                                    <select class="form-control" required name="cat">
                                                                        <option value="@item.CatID" selected>@item.CatID</option>
                                                                        @foreach (var item1 in Model.cat_list)
                                                                        {
                                                                            <option value="@item1.Name">@item1.Name</option>
                                                                        }
                                                                    </select>
                                                                </div>
                                                                <div class="form-group col-sm-3">
                                                                    <label>Select Brand </label>
                                                                    <select class="form-control" required name="brand">
                                                                        <option value="@item.BrandID" selected>@item.BrandID</option>
                                                                        @foreach (var item1 in Model.br_list)
                                                                        {
                                                                            <option value="@item1.Name">@item1.Name</option>
                                                                        }
                                                                    </select>
                                                                </div>
                                                                <div class="form-group col-sm-3">
                                                                    <label>Product Name</label>
                                                                    <input type="text" name="name" required value="@item.Name" class="form-control" autocomplete="off">
                                                                </div>
                                                                <div class="form-group col-sm-3" style="display:none">
                                                                    <label>Description </label>
                                                                    <input type="text" value="@item.CatID" class="form-control" autocomplete="off">
                                                                </div>
                                                                <div class="form-group col-sm-3">
                                                                    <label>P/Box </label>
                                                                    <input type="text" name="p_box" value="@if (item.PiecesBox == 0) { @o } else { @item.PiecesBox } " class="form-control" autocomplete="off">
                                                                </div>
                                                                <div class="form-group col-sm-3">
                                                                    <label>CostPrice </label>
                                                                    <input type="text" name="cost_price" value="@item.CostPrice" required class="form-control" autocomplete="off">
                                                                </div>
                                                                <div class="form-group col-sm-3">
                                                                    <label>SalePrice Pkr</label>
                                                                    <input type="text" name="sale_price" value="@item.SalePrice" required class="form-control" autocomplete="off">
                                                                </div>
                                                                <div class="form-group col-sm-3" style="display:none">
                                                                    <label>SalePrice Euro </label>
                                                                    <input type="text" name="SalePrice_euro" value="@item.SalePrice_euro" class="form-control" autocomplete="off">
                                                                </div>
                                                                <div class="form-group col-sm-3">
                                                                    <label>LeastPrice </label>
                                                                    <input type="text" name="least_price" value="@item.LeastPrice" required class="form-control" autocomplete="off">
                                                                </div>
                                                                <div class="form-group col-sm-3">
                                                                    <label>Opening Stock </label>
                                                                    <input type="text" name="op_stock" value="@item.OpeningStock" required class="form-control" autocomplete="off">
                                                                </div>
                                                                <div class="form-group col-sm-3">
                                                                    <label>Unit of Measurment </label>
                                                                    <select class="form-control" required name="unit">
                                                                        <option value="@item.MUnit" selected>
                                                                            @item.MUnit
                                                                        </option>
                                                                        @foreach (var item2 in Model.MeasuringUnit)
                                                                        {
                                                                            <option value="@item2.Name">@item2.Name</option>
                                                                        }
                                                                    </select>
                                                                    @*<input type="text" name="unit" value="@item.MUnit" class="form-control" autocomplete="off">*@
                                                                </div>
                                                                <div class="form-group col-sm-3">
                                                                    <label>Shelf number </label>
                                                                    <input type="text" name="ShelfNumber" value="@item.ShelfNumber" required class="form-control" autocomplete="off">
                                                                </div>
                                                                <div class="form-group col-sm-3">
                                                                    <label>Reorder level </label>
                                                                    <input type="text" name="ReOrder" value="@item.ReOrder" required class="form-control" autocomplete="off">
                                                                </div>
                                                                <div class="form-group col-sm-3">
                                                                    <label>Barcode </label>
                                                                    <input type="text" name="Barcode" value="@item.Barcode" required class="form-control" autocomplete="off">
                                                                </div>
                                                                <div class="form-group col-sm-3">
                                                                    <label>Vat % </label>
                                                                    <input type="text" name="vat" value="@item.Wat" required class="form-control" autocomplete="off">
                                                                </div>
                                                                <div class="form-group col-sm-3">
                                                                    <label>Brand % </label>
                                                                    <input type="text" name="brandper" value="@item.Brand" required class="form-control" autocomplete="off">
                                                                </div>
                                                                <div class="form-group col-sm-3">
                                                                    <label>Image </label>
                                                                    <input type="file" name="file" class="form-control" X>
                                                                </div>
                                                                <div class="col-sm-12">
                                                                    <button type="submit" class="btn btn-primary" name="button" value="edit" onclick="return alert('Are you Sure you want to Update?')" style="margin-top:10px"><i class="fa fa-plus"></i> Update</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                                        </div>
                                                    </div>
                                                }
                                            </div>
                                        </div>
                                    </tr>
                                }
                            </tbody>
                            <tfoot>
                                <tr>
                                    <th><input type="hidden" placeholder="Search Here" name="search_browser"></th>
                                    <th style="width:160px !important"><input type="text" placeholder="Search Here" name="search_browser" class="form-control input-sm" style="width:180px  !important"></th>
                                    <th style="width:160px !important"><input type="text" placeholder="Search Here" name="search_browser" class="form-control input-sm" style="width:180px  !important"></th>
                                    <th style="width:160px !important"><input type="text" placeholder="Search Here" name="search_browser" class="form-control input-sm" style="width:180px  !important"></th>
                                    <th style="width:160px !important"><input type="text" placeholder="Search Here" name="search_browser" class="form-control input-sm" style="width:180px  !important"></th>
                                    <th style="width:60px"><input type="text" placeholder="Search Here" name="search_browser" class="form-control input-sm" style="width:80px"></th>
                                    <th style="width:60px"><input type="text" placeholder="Search Here" name="search_browser" class="form-control input-sm" style="width:80px"></th>
                                    <th style="width:60px"><input type="text" placeholder="Search Here" name="search_browser" class="form-control input-sm" style="width:80px"></th>
                                    <th></th>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
